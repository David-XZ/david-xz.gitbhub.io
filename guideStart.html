<!DOCTYPE html>
<html>
<head>
  <script type="text/javascript" src="script/eventemitter2.js"></script>
  <script type="text/javascript" src="script/roslib.min.js"></script>

  <script type="text/javascript">

    // connect to rosbridge
    var ros = new ROSLIB.Ros({
      url : 'ws://192.168.1.126:9090'
    });

    // connection status
    ros.on('connection', function(){
      console.log('Connected to websocket server.');
    });

    ros.on('error', function(error){
      console.log('Error connecting to websocket server: ', error);
    });

    ros.on('close', function(){
      console.log('Connection to websocket server closed.');
    });

    // goal topic publisher
    var goal_pub = new ROSLIB.Topic({
      ros : ros,
      name : '/move_base_simple/goal',
      messageType : 'geometry_msgs/PoseStamped'
    });

    // find destination pose
    const queryString = window.location.search;
    const urlParams = new URLSearchParams(queryString);
    const destination = urlParams.get('destination');



    // initiate goal msg
    var goal = new ROSLIB.Message({
      header : {
        frame_id : map
      },
      pose : {
        Pose : {

        },
        Orientation : {

        }
      }
    });

    // publish goal
    goal_pub.publish(goal);
  </script>
</head>
<body>
</body>
</html>
